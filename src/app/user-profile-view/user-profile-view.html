<div class="profile-container">
  <mat-card class="profile-card">
    <mat-card-header>
      <mat-card-title> User Profile </mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form>
        <!-- Existing fields -->
        <mat-form-field>
          <mat-label>Username</mat-label>
          <input
            matInput
            [(ngModel)]="user.username"
            placeholder="Username"
            name="username"
            required
          />
        </mat-form-field>
        
        <mat-form-field>
          <mat-label>Email</mat-label>
          <input
            matInput
            [(ngModel)]="user.email"
            placeholder="Email"
            type="email"
            name="email"
            required
          />
        </mat-form-field>
        
        <div *ngIf="birthday">
  <p>Current Birthday: {{ birthday | date:'mediumDate' }}</p>
</div>


        <mat-form-field>
          <mat-label>First Name</mat-label>
          <input matInput
                name="firstName"
                [(ngModel)]="user.firstName"
                placeholder="First Name">
        </mat-form-field>

        <mat-form-field>
          <mat-label>Last Name</mat-label>
          <input matInput
                name="lastName"
                [(ngModel)]="user.lastName"
                placeholder="Last Name">
        </mat-form-field>

        <!-- Password update section -->
        <div class="password-section">
          <button mat-button color="primary" (click)="showPasswordFields = !showPasswordFields">
            {{showPasswordFields ? 'Cancel Password Change' : 'Change Password'}}
          </button>
          
          <div *ngIf="showPasswordFields" class="password-fields">
            <mat-form-field>
              <mat-label>New Password</mat-label>
              <input
                matInput
                [(ngModel)]="password"
                type="password"
                name="newPassword"
                placeholder="New password"
              />
            </mat-form-field>
            
            <mat-form-field>
              <mat-label>Confirm Password</mat-label>
              <input
                matInput
                [(ngModel)]="confirmPassword"
                type="password"
                name="confirmPassword"
                placeholder="Confirm new password"
              />
            </mat-form-field>
          </div>
        </div>
      </form>
    </mat-card-content>
    
    <mat-card-actions>
      <button mat-raised-button color="primary" (click)="updateUser()">
        Save Changes
      </button>
    </mat-card-actions>
  </mat-card>
</div>

<!-- Favorite movies section remains unchanged -->

<div class="favorite-container">
  <h2>Favorite Movies</h2>
  <p *ngIf="favoriteMovies.length === 0">No favorite movies yet</p>
  
  <div class="movie-grid">
    <mat-card *ngFor="let movie of favoriteMovies" class="mat-elevation-z4 movie-card">
      <mat-card-header style="height: 10%">
        <mat-card-title>{{ movie.title }}</mat-card-title>
      </mat-card-header>
      <div class="poster-container">
      <img
        style="width: 100%; height: 80%; object-fit: contain"
        [src]="movie.posterImage"
        [alt]="movie.title + ' poster'"
      />
      </div>
     
      <mat-card-actions>
        <button mat-button color="primary" (click)="openGenreDialog(movie.genre)">
          Genre
        </button>
        <button mat-button color="primary" (click)="openDirectorDialog(movie.director)">
          Director
        </button>
        <button mat-button color="primary" (click)="openMovieDetailsDialog(movie)"> 
          Details
        </button>
        <button mat-button (click)="removeFavorite(movie._id)">
          <mat-icon>favorite</mat-icon> Remove
        </button>
      </mat-card-actions> 
    </mat-card>
  </div>
</div>